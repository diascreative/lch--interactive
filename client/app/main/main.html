<div class="filters">
  <div class="filters__copy">
    <h1 class="logo"><img src="/assets/images/logo.svg" height="90px" width="90px" alt="low carbon hub"></h1>

    <h1 class="main-title">PEOPLE'S POWER STATION</h1>
    <h2 class="strapline">An energy system you can feel good about, for Oxfordshire and the UK.</h2>

  <!--   <p class="intro-text">
      Search the People's Power Station to explore locally owned renewable energy in Oxfordshire.
    </p> -->

    <div class="stats">
      Together,
      {{$ctrl.copyOwnershipType()}}
      in
      {{$ctrl.copyArea()}}
      is currently generating:

      <div class="large-text">{{$ctrl.getFilteredTotalGeneration()}}</div>

      from

      {{$ctrl.getFilteredInstallations()}} installations
    </div>
  </div>

  <div class="filters__options">
    <ui-select title="Search by project"
      ng-model="$ctrl.searchInstallation"
      on-select="$ctrl.filterFreeText($item)">
      <ui-select-match allow-clear="true"
        placeholder="Search by project">{{$select.selected.name}}</ui-select-match>
      <ui-select-choices repeat="installation in $ctrl.map.installations | filter: $select.search">
        <span ng-bind-html="installation.name | highlight: $select.search"></span>
      </ui-select-choices>
    </ui-select>

    <h4>Geography</h4>
    <label ng-repeat="localAuthority in $ctrl.filtersAvailable.localAuthorities | orderBy:'name'">
      <input type="checkbox" name="local-authorities"
        ng-model="localAuthority.checked"
        ng-change="$ctrl.filterInstallations()">
      {{localAuthority.name}}
    </label>

    <h4>Ownership</h4>
    <label ng-repeat="ownership in $ctrl.filtersAvailable.ownership | orderBy:'name'">
      <input type="checkbox" name="ownership"
        ng-model="ownership.checked"
        ng-change="$ctrl.filterInstallations()">
      {{ownership.name}}
    </label>

    <div ng-hide="$ctrl.filtersAvailable.ownershipType.length">
    <h4>Ownership Type</h4>
    <label ng-repeat="type in $ctrl.filtersAvailable.ownershipType | orderBy:'name'">
      <input type="checkbox" name="ownershipType"
        ng-model="type.checked"
        ng-change="$ctrl.filterInstallations()">
      {{type.name}}
    </label>
    </div>

    <h4>Energy Type</h4>
    <label ng-repeat="type in $ctrl.filtersAvailable.energyTypes | orderBy:'name'">
      <input type="checkbox" name="energyTypes"
        ng-model="type.checked"
        ng-change="$ctrl.filterInstallations()">
      {{type.name}}
    </label>
  </div>
</div>

<div class="map-section">
  <leaflet class="map"
    markers="$ctrl.map.installations"
    defaults="$ctrl.map.defaults"
    geojson="$ctrl.map.geojson"></leaflet>
</div>
