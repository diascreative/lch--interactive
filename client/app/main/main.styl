.large-text
  font 30px/22px $font-secondary
  letter-spacing -.31px
  vertical-align top

  .units
    font-size 16px
    letter-spacing -.17px

  .main-copy &
    font-size 22px
    vertical-align bottom

div.large-text
  border-bottom 1px solid #fff
  margin 14px 0 1px
  padding 0

.clear
  clear both
  height 0
  width 100%

/*
 * Filters
 */
.filters
  background rgba(#fff, .95)
  box-shadow 0 0 6px 3px rgba(0, 0, 0, .15)
  color #4a4a4a
  font bold 14px/20px $font-primary
  max-height 'calc(100vh - %s)' % ($header-height - 55)
  opacity 1
  overflow auto
  padding 10px 48px 20px
  position absolute
  right 0
  transform translateY(-100%)
  transition transform .4s cubic-bezier(0, 0, .25, 1)
  visibility visible
  width 100%
  z-index 1050

  @media $not-mobile
    max-width $filter-width
    top $header-height

  &--visible
    transform translateY(0)

  &__options
    position relative

  &__hint
    color $color-secondary
    display inline-block

  h4:not(:first-of-type)
    margin-top 40px

  .postcode-seach
    border 0
    border-bottom solid 1px $font-color-primary
    display inline-block
    font-size 12px
    line-height 20px
    height 32px
    max-width 100px
    padding 5px 10px
    width 100%

  label.column
    display block
    margin-bottom 4px

  label.inline
    display inline-block
    margin-right 18px

  input[type='radio']
    position absolute
    vertical-align middle
    visibility hidden

    + span
      border 2px solid $font-color-primary
      border-radius 50%
      display inline-block
      height 1em
      position relative
      vertical-align middle
      width 1em

      &:before
        background $color-primary
        border-radius 50%
        content ''
        height 0.6em
        left 50%
        margin -0.3em 0 0 -0.3em
        position absolute
        top 50%
        transform scale(0, 0)
        transform-origin 50% 50%
        transition transform .6s cubic-bezier(0, 0, .25, 1)
        width 0.6em

    &:checked + span:before
      transform scale(1, 1)
      transition transform .6s cubic-bezier(.25, 1, 0, 0)

  .ui-select-bootstrap .ui-select-match-text
    max-width 100%

/*
 * Stats
 */
.stats
  background rgba(#00748D, .94)
  box-shadow 0 0 6px 3px rgba(0, 0, 0, .15)
  color #fff
  font 18px/22px $font-primary
  margin 20px -48px
  padding 16px 48px 16px
  position relative

  &:after
    background #fff
    bottom 100%
    content ''
    height 6px
    left 0
    position absolute
    right 0

/*
 * Map
 */

.graph
  canvas
    max-height 200px
    position relative
    max-width 100%

$animation-timing = .3s

.leaflet-zoom-anim .leaflet-zoom-animated
  transition transform 1s cubic-bezier(0, 0, .25, 1)

.map-section
  height 80vh
  position relative

  @media $not-mobile
    height 'calc(100vh - %s)' % $header-height
    margin-left $main-content-width
    width calc(100% - $main-content-width)

.map
  height 100%
  width 100%

/* Map marker */
.leaflet-marker-icon
  background transparent
  border 0
  opacity .5

  &:before
    background url(/assets/images/marker.svg) 0 0 no-repeat
    background-size 30px 45px
    content ''
    display block
    height 100%
    left 0
    position absolute
    top 0
    transition transform cubic-bezier(.68, -.55, .265, 1.55) $animation-timing
    transform-origin 50% 100%
    width 100%
    will-change transform

    path
      fill #00748D

  &--hidden
    opacity 0
    visibility hidden
    transition opacity 1ms $animation-timing, visibility 1ms $animation-timing

    &:before
      transform scale(0, 0)

.leaflet-marker-icon--focus
  opacity 1

  &:before
    transform scale(1.3)


/* Map tooltip */
.leaflet-popup
  pointer-events none

.leaflet-popup-content-wrapper
.leaflet-popup-tip
.leaflet-popup-close-button
  pointer-events all

.leaflet-popup-content-wrapper
.leaflet-popup-tip
  background rgba(#fff, .94)
  box-shadow 0 0 6px 3px rgba(0, 0, 0, .15)

.leaflet-popup-content-wrapper
  border-radius 0

.leaflet-popup-content
  color $font-color-primary
  font-size 14px
  line-height 17px
  margin 0

  p
    margin 8px 0

.map-popup
  max-width 300px
  padding 18px 22px 0

  h2
    font-size 24px
    line-height 28px

  a
    border-bottom solid 1px $color-secondary
    color $color-secondary
    font-weight bold
    display inline-block
    margin 0 0 10px
    text-decoration none
    transition color .3s cubic-bezier(0, 0, .25, 1), color .2s .3s cubic-bezier(0, 0, .25, 1)

    &:hover
    &:focus
      border-color $color-primary
      color $color-primary

  .large-text
    line-height 17px

  &__graphic
    border 1px dashed $font-color-primary
    border-left 0
    border-right 0
    margin 0 0 22px
    padding 12px 0 9px
    position relative

    &:after
      clear both
      content ''
      display block
      height 0
      width 100%


  &__icon-section
    background rgba(#f5a623, .6)
    border-radius 50%
    float right
    height 140px
    position relative
    width 140px

  &__capacity
    color #f5a623
    left 0
    position absolute
    top 50%
    transform translateY(-50%)
    width calc(100% - 140px)

    .large-text
      border-bottom 1px dashed #F5A623
      margin-right 10px

  &__icon
    background #fff
    border solid 10px #f5a623
    border-radius 50%
    box-sizing content-box
    height 60px
    left 50%
    overflow hidden
    position absolute
    transform translate(-50%, -50%)
    top 50%
    width 60px

    &:after
      content url(../assets/images/icon--solar.svg)
      height 23px
      left 50%
      margin -5px 0 0 -22px
      position absolute
      top 50%
      width 38px

    &:before
      animation 3s linear infinite sun
      content url(../assets/images/icon--solar-sun.svg)
      height 22px
      left 50%
      margin -16px 0 0 -1px
      position absolute
      transform-origin 50% 50%
      top 50%
      width 22px

  &.hydro
    .map-popup__capacity
      color #98CAEC

      .large-text
        border-bottom 1px dashed #98CAEC

    .map-popup__icon-section
      background rgba(#98CAEC, .6)

    .map-popup__icon
      border-color #98CAEC

      &:after
        animation 3s linear infinite hydro-water
        content url(../assets/images/icon--hydro.svg)
        height 9px
        margin 0px 0 0 -95px
        width 132px

      &:before
        animation 10s linear infinite hydro-wheel
        content url(../assets/images/icon--hydro-wheel.svg)
        height 40px
        margin -20px 0 0 -17px
        width 34px

@media $tablet
  .filters
    top $header-height--tablet

  .map-section
    height 'calc(100vh - %s)' % $header-height--tablet


@keyframes sun
  from
    transform rotateZ(0deg)

  to
    transform rotateZ(180deg)

@keyframes hydro-wheel
  from
    transform rotate3d(0, 0, 0, 0deg)

  to
    transform rotate3d(0, 0, 1, -180deg)

@keyframes hydro-water
  from
    transform translateX(0)

  to
    transform translateX(56px)
